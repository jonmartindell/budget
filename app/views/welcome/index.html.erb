<style> .category-rows:nth-child(even){ background-color: #f1f1f1; } </style>

<div class="container-fluid">
  <h4>Expenses</h4>
  <div class="row">
    <h6 class="col-xs-4"><small>Category</small></h6>
    <h6 class="col-xs-2 text-nowrap"><small>YTD +/-</small></h6>
    <h6 class="col-xs-1"></h6>
    <h6 class="col-xs-2 text-nowrap"><small>Remaining</small></h6>
    <h6 class="col-xs-2"></h6>
  </div>
  <% @categories.each_pair do |heading, categories| %>
    <div class="row">
      <h4 class="col-xs-12 text-nowrap"><%= heading %></h4>
    </div>
    <% categories.each do |category| %>
      <div class="row category-rows">
        <% if category.infrequent %>
          <h6 class="col-xs-4 text-nowrap"><%=category.name[0,13] %><sup>*</sup></h6>
          <h6 class="col-xs-2 text-nowrap">
            <small class="<%= 'text-success' if category.ytd_spent < 0 %>">
                $<%=category.ytd_spent%><small> (10% rem)</small>
                <% if category.ytd_spent < 0 %>
                  <span class="text-success glyphicon glyphicon-arrow-down"></span>
                <% end %>
                <% if category.ytd_spent == 100 %>
                  <span class="text-success glyphicon glyphicon-arrow-up"></span>
                <% end %>
              </small>
          </h6>
          <h6 class="col-xs-1">
            <% if category.ytd_spent == 100 %>
              <span class="text-warning glyphicon glyphicon-arrow-up"></span>
            <% end %>
          </h6>
          <h6 class="col-xs-2 text-nowrap">
            $<%=category.budget - category.spent(@month)%><small> saved</small>
          </h6>
        <% else %>
          <h6 class="col-xs-4 text-nowrap"><%=category.name[0,13] %></h6>
          <h6 class="col-xs-2 text-nowrap">
            <small class="<%= 'text-success' if category.ytd_spent > 0 %>">$<%=category.ytd_spent%></small>
          </h6>
          <h6 class="col-xs-1">
            <% if category.ytd_spent == 100 %>
              <span class="text-warning glyphicon glyphicon-arrow-up"></span>
            <% end %>
          </h6>
          <h6 class="col-xs-2 text-nowrap">
            $<%=category.spent(@month)%><small>/<%=category.budget%></small>
          </h6>
        <% end %>
        <div class="col-xs-1">
          <%= link_to new_transaction_path(category: category.id), class: "btn btn-success" do %>
            <i class="glyphicon glyphicon-plus"></i>
          <% end %>
        </div>
      </div>
    <% end %>
  <% end %>

  <%# <hr></hr> %>
  <%# <h3>Uncommon Expenses</h3> %>
  <%#   <div class="row"> %>
  <%#     <h5 class="col-xs-4"><small>Category</small></h5> %>
  <%#     <h5 class="col-xs-3 text-nowrap"><small>Yearly Spent</small></h5> %>
  <%#     <h5 class="col-xs-2"><small>Available</small></h5> %>
  <%#   </div> %>
  <%# <% @uncommon_categories.each do |category| %1> %>
  <%#   <div class="row category-rows"> %>
  <%#     <h5 class="col-xs-4 text-nowrap"><%=category.name[0,13] %1></h5> %>
  <%#     <h5 class="col-xs-2 text-nowrap"> %>
    <%#       <small class="<%= 'text-success' if category.ytd_spent < 0 %1>">$<%=category.ytd_spent%>
    <%# <small> (10%)</small>%>
  <%#           <% if category.ytd_spent < 0 %1> %>
  <%#             <span class="text-success glyphicon glyphicon-arrow-down"></span> %>
  <%#           <% end %1> %>
  <%#           <% if category.ytd_spent == 100 %1> %>
  <%#             <span class="text-success glyphicon glyphicon-arrow-up"></span> %>
  <%#           <% end %1> %>
  <%#         </small> %>
  <%#     </h5> %>
  <%#     <h5 class="col-xs-1"> %>
  <%#       <% if category.ytd_spent == 100 %1> %>
  <%#         <span class="text-warning glyphicon glyphicon-arrow-up"></span> %>
  <%#       <% end %1> %>
  <%#     </h5> %>
  <%#     <h5 class="col-xs-2 text-nowrap"> %>
  <%#       $<%=category.budget - category.spent(@month)%>
  <%#     </h5> %>
  <%#     <div class="col-xs-1 col-xs-offset-1"> %>
  <%#       <%= link_to new_transaction_path(category: category.id), class: "btn btn-success" do %1> %>
  <%#         <i class="glyphicon glyphicon-plus"></i> %>
  <%#       <% end %1> %>
  <%#     </div> %>
  <%#   </div> %>
  <%# <% end %1> %>
</div>

